<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="web.batis.myinterface.Teacherinterface">
    <resultMap id="asTeacher" type="web.Teacher">
        <!--        用id的作用，是辨别多条数据，是否属于同一个对象的数据，如根据老师id查询学生，会查询出多条，但是老师id是一致的，所以属于同一条数据-->
        <id column="tid" property="tid"></id>
        <result column="name" property="name"></result>
<!--        1对多（一个老师对应多个学生，老师是主数据，学生为列表）  collection会把所有记录，变为集合，property = studentList为集合名称，ofType=web.Student为类型类型-->
        <collection property="studentList" ofType="web.Student">
            <id column="id" property="sid"></id>
            <result column="sname" property="name"></result>
            <result column="sex" property="sex"></result>
            <result column="score" property="score"></result>
        </collection>

<!--            多对1（多个学生对应一个老师，每个学生都是一条数据，里面字段关联了老师）-->
<!--        <association property="teacher" javaType="web.Teacher">-->
<!--            <id column="tid" property="tid"></id>-->
<!--            <result column="tname" property="name"></result>-->
<!--        </association>-->
    </resultMap>
    <select id="getTeacherById" resultMap="asTeacher">
        select *,s.name as sname from teacher t1 left join teach t2 on t1.tid = t2.tid left join student s on t2.sid = s.sid where t1.tid = #{tid}
    </select>

</mapper>